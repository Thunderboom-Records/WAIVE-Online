<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <title><%= htmlWebpackPlugin.options.title %></title>
    </head>
    <body>
    <div id="content">

		<h1>WAIVE-Online</h1>
		<p>Welcome to the prototype browser-based interface to WAIVE: the AI that generates dance music from archieved sound materials.</p>
		<p><i>This is an early WIP and may break/change at anytime.</i></p>

		<div id="waive">
    		<div class="row">
                <div id="play" class="btn">play</div>
                <input type="number" min="60" max="200" id="bpm" value="110">
                <select name="loop" id="loop-length">
                	<option value="4">4</option>
                	<option value="2">2</option>
                	<option value="1">1</option>
                	<option value="0.5">1/2</option>
                	<option value="0.25">1/4</option>
                	<option value="0.125">1/8</option>
                	<option value="0.0625">1/16</option>
                </select>
                <div id="download-loop" class="btn">download loop</div>
    		</div>

			<!--  ==== DRUM MACHINE ====  -->
    		<div class="row"><h2>Drum Machine</h2></div>
    	    <div class="play-area">
        	    <canvas id="timeline" width="800" height="12"></canvas>
        		<div id="drum-arrangement" class="arrangement-view"></div>
            	<div class="p-bar"></div>
        	</div>
            <div id="drum-channels"></div>
    		<div class="bar-pool" id="drum-pool"></div>
    		<div class="controls">
                <input type="range" class="input-knob" id="drum-threshold" data-diameter="40" min="0" max="1" step="0.01" data-bgcolor="#444" data-fgcolor="#BBB"/>
                <div id="request-new-grid" class="btn">new</div>
                <div id="request-variation-grid" class="btn">variation</div>
                <div id="drum-midi-download" class="btn" target="_blank" download="drum_pattern.mid">⤓ drum arrangement</div>
    		</div>

			<!--  ==== BASS ====  -->
    		<div class="row"><h2>Bass Synth</h2></div>
    		<div class="play-area">
        		<div id="bass-arrangement" class="arrangement-view"></div>
            	<div class="p-bar"></div>
    		</div>
    		<div class="ins-channel" id="bass-controls">
                <div class="spacer"></div>
    		</div>
    		<div class="bar-pool" id="bass-pool">
    		</div>
    		<div class="controls">
                <div id="request-new-bassline" class="btn">new</div>
                <div id="request-variation-bassline" class="btn">variation</div>
                <div id="bassline-midi-download" class="btn" target="_blank" download="bassline.mid">⤓ arrangement</div>
    		</div>

			<!--  ==== SAMPLER ====  -->
    		<div class="row"><h2>Sampler</h2></div>
    		<div class="play-area">
        		<div id="sampler-arrangement" class="arrangement-view"></div>
                <div class="p-bar"></div>
    		</div>
			<div class="ins-channel" id="sound-controls">
                <div class="spacer"></div>
			</div>
			<div class="bar-pool" id="sampler-pool"></div>
    		<div class="controls">
                <div id="request-sound-pattern" class="btn">new sampler patterns</div>
                <!-- <div id="request-sound-samples" class="btn">new samples</div> -->
    		</div>
    		<div class="row"><h2>Master FX</h2></div>
    		<div class="row" id="master-controls">

    		</div>

		</div>

		<br><br><br><br>
		<h3>How to use (INCOMPLETE)</h3>
		<ul>
    		<li>"play" and "bpm" controls are at the top.</li>
    		<li>WAIVE creates four bar loops that are repeated. You can generate and arrange bars as follows:</li>
    		<li><b>Generating bars</b>
        		<ul>
            		<li>Generate a single bar for an instrument by clicking "new". If this is the first one, it is added to the arrangement view.</li>
            		<li>Double clicking the small preview of a bar adds it to the arrangement view.</li>
            		<li>Clicking the preview of the bar and then clicking "variation" will generate a new bar with a slight variation. Double click the new bar to add it to the arrangement view.</li>
            		<li>Clicking a bar in the arrangement view removes it.</li>
            		<li>Right clicking the small preview bar will delete it.</li>
        		</ul>
    		</li>
    		<li><b>Drum Machine:</b>
        		<ul>
    				<li>Load samples for the KickDrum, SnareDrum and HighHat by clicking the "new sample" button.</li>
    				<li>You can trigger the sample manually by pressing the ▶ button.</li>
            		<li>The name of the sample is shown below these buttons.</li>
            		<li>You will need to generate a drum pattern to begin hearing the drum samples with the "new" button.</li>
            		<li>The current drum pattern is shown on the large grid, and the queue of the next patterns shown below on the smaller grid. After each loop, the next pattern is selected until there are no more.</li>
            		<li>The dial next to the pattern generate button sets the sensitivity of the pattern - the lower the dial, the more drum triggers there are.</li>
            		<li>You can download a MIDI file of the drum pattern with the download button.</li>
        		</ul>
    		</li>
    		<li><b>Sampler:</b>
        		<ul>
            		<li>Generate a "melody" of sound samples by clicking "new sampler patterns" button. This will request a sequence of melodies shown below the main grid.</li>
            		<li>The names of each sample are shown in the coloured boxes.</li>
            		<li>"new samples" button will transition the current set of samples to a new set after each loop.</li>
        		</ul>
        	</li>
    		<li><b>FXs:</b>
        		<ul>
            		<li>Click on the name of an effect to toggle it (colored background means the effect is active, greyed and crossed out means it is bypassed).</li>
            		<li>Parameters of the effects can be changed by dragging up or down on a dial.</li>
            		<li>The <b>Drum Machine</b> and <b>Sampler</b> are mixed into <b>Master FX</b> before routing to the speakers.</li>
        		</ul>
        	</li>
		</ul>

		<h3>Next steps:</h3>
		<ul>
    		<li>Add many more samples and FXs. [ easy ]</li>
    		<li><s>Add velocity to drum hits and sampler to make it play with feeling. [ easy ]</s></li>
    		<li><s>Add download buttons [ easy ]</s></li>
    		<li><s>Add feature to generate 4 bar loops. [ hard ]</s></li>
    		<li>Add keyboard shortcuts. [ medium ]</li>
    		<li>Add automatic FX parameter modulation. [ hard ]</li>
    		<li>Add abilty to rearrage/add different effects. [ hard ]</li>
    	</ul>

    </div>
    </body>
</html>
